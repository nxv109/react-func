{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nexport default function useKeepPositionScroll() {\n  _s();\n\n  let location = useLocation();\n  const [scrollTop, setScrollTop] = useState(0);\n  const [isScroll, setIsScroll] = useState(false);\n  useEffect(() => {\n    let newScrollPosition = []; // get scrollPosition from sessionStorage\n\n    const scrollPosition = JSON.parse(sessionStorage.getItem(\"scroll-position\")) || []; // get index\n\n    const id = scrollPosition.findIndex(v => v.pathname === location.pathname); // check if pathname exist in storage\n\n    if (id !== -1) {\n      // if not scroll then default scroll to position available in storage\n      if (!isScroll) window.scrollTo(0, scrollPosition[id].position); // update sessionStorage\n\n      newScrollPosition = [...scrollPosition];\n      newScrollPosition.splice(id, 1, {\n        pathname: location.pathname,\n        position: scrollTop\n      });\n      sessionStorage.setItem(\"scroll-position\", JSON.stringify(newScrollPosition));\n      return;\n    }\n\n    newScrollPosition = [...scrollPosition, {\n      pathname: location.pathname,\n      position: 0\n    }];\n    sessionStorage.setItem(\"scroll-position\", JSON.stringify(newScrollPosition));\n    window.scrollTo(0, 0);\n  }, [scrollTop, location.pathname, isScroll]); // Get scroll top\n\n  const windowScrollTop = () => {\n    const position = window.pageYOffset;\n    setIsScroll(true);\n    setScrollTop(position);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", windowScrollTop);\n    return () => window.removeEventListener(\"scroll\", windowScrollTop);\n  }, []);\n  return location;\n}\n\n_s(useKeepPositionScroll, \"or+nh6WVB9NUukZR+UCE8iE4Avs=\", false, function () {\n  return [useLocation];\n});","map":{"version":3,"sources":["C:/Users/Admin/Desktop/github/react-func/keep-scroll/src/hooks/useKeepPositionScroll.js"],"names":["useState","useEffect","useLocation","useKeepPositionScroll","location","scrollTop","setScrollTop","isScroll","setIsScroll","newScrollPosition","scrollPosition","JSON","parse","sessionStorage","getItem","id","findIndex","v","pathname","window","scrollTo","position","splice","setItem","stringify","windowScrollTop","pageYOffset","addEventListener","removeEventListener"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,eAAe,SAASC,qBAAT,GAAiC;AAAA;;AAC9C,MAAIC,QAAQ,GAAGF,WAAW,EAA1B;AACA,QAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAC,CAAD,CAA1C;AACA,QAAM,CAACO,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,KAAD,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,iBAAiB,GAAG,EAAxB,CADc,CAGd;;AACA,UAAMC,cAAc,GAClBC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,iBAAvB,CAAX,KAAyD,EAD3D,CAJc,CAOd;;AACA,UAAMC,EAAE,GAAGL,cAAc,CAACM,SAAf,CACRC,CAAD,IAAOA,CAAC,CAACC,QAAF,KAAed,QAAQ,CAACc,QADtB,CAAX,CARc,CAYd;;AACA,QAAIH,EAAE,KAAK,CAAC,CAAZ,EAAe;AACb;AACA,UAAI,CAACR,QAAL,EAAeY,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmBV,cAAc,CAACK,EAAD,CAAd,CAAmBM,QAAtC,EAFF,CAIb;;AACAZ,MAAAA,iBAAiB,GAAG,CAAC,GAAGC,cAAJ,CAApB;AACAD,MAAAA,iBAAiB,CAACa,MAAlB,CAAyBP,EAAzB,EAA6B,CAA7B,EAAgC;AAC9BG,QAAAA,QAAQ,EAAEd,QAAQ,CAACc,QADW;AAE9BG,QAAAA,QAAQ,EAAEhB;AAFoB,OAAhC;AAKAQ,MAAAA,cAAc,CAACU,OAAf,CACE,iBADF,EAEEZ,IAAI,CAACa,SAAL,CAAef,iBAAf,CAFF;AAKA;AACD;;AAEDA,IAAAA,iBAAiB,GAAG,CAClB,GAAGC,cADe,EAElB;AACEQ,MAAAA,QAAQ,EAAEd,QAAQ,CAACc,QADrB;AAEEG,MAAAA,QAAQ,EAAE;AAFZ,KAFkB,CAApB;AAQAR,IAAAA,cAAc,CAACU,OAAf,CACE,iBADF,EAEEZ,IAAI,CAACa,SAAL,CAAef,iBAAf,CAFF;AAIAU,IAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACD,GA7CQ,EA6CN,CAACf,SAAD,EAAYD,QAAQ,CAACc,QAArB,EAA+BX,QAA/B,CA7CM,CAAT,CAL8C,CAoD9C;;AACA,QAAMkB,eAAe,GAAG,MAAM;AAC5B,UAAMJ,QAAQ,GAAGF,MAAM,CAACO,WAAxB;AACAlB,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAF,IAAAA,YAAY,CAACe,QAAD,CAAZ;AACD,GAJD;;AAMApB,EAAAA,SAAS,CAAC,MAAM;AACdkB,IAAAA,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCF,eAAlC;AACA,WAAO,MAAMN,MAAM,CAACS,mBAAP,CAA2B,QAA3B,EAAqCH,eAArC,CAAb;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SAAOrB,QAAP;AACD;;GAjEuBD,qB;UACPD,W","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function useKeepPositionScroll() {\n  let location = useLocation();\n  const [scrollTop, setScrollTop] = useState(0);\n  const [isScroll, setIsScroll] = useState(false);\n\n  useEffect(() => {\n    let newScrollPosition = [];\n\n    // get scrollPosition from sessionStorage\n    const scrollPosition =\n      JSON.parse(sessionStorage.getItem(\"scroll-position\")) || [];\n\n    // get index\n    const id = scrollPosition.findIndex(\n      (v) => v.pathname === location.pathname\n    );\n\n    // check if pathname exist in storage\n    if (id !== -1) {\n      // if not scroll then default scroll to position available in storage\n      if (!isScroll) window.scrollTo(0, scrollPosition[id].position);\n\n      // update sessionStorage\n      newScrollPosition = [...scrollPosition];\n      newScrollPosition.splice(id, 1, {\n        pathname: location.pathname,\n        position: scrollTop,\n      });\n\n      sessionStorage.setItem(\n        \"scroll-position\",\n        JSON.stringify(newScrollPosition)\n      );\n\n      return;\n    }\n\n    newScrollPosition = [\n      ...scrollPosition,\n      {\n        pathname: location.pathname,\n        position: 0,\n      },\n    ];\n\n    sessionStorage.setItem(\n      \"scroll-position\",\n      JSON.stringify(newScrollPosition)\n    );\n    window.scrollTo(0, 0);\n  }, [scrollTop, location.pathname, isScroll]);\n\n  // Get scroll top\n  const windowScrollTop = () => {\n    const position = window.pageYOffset;\n    setIsScroll(true);\n    setScrollTop(position);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", windowScrollTop);\n    return () => window.removeEventListener(\"scroll\", windowScrollTop);\n  }, []);\n\n  return location;\n}\n"]},"metadata":{},"sourceType":"module"}