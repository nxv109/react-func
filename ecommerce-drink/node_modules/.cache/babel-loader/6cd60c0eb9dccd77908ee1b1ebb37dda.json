{"ast":null,"code":"import _objectSpread from \"/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/src/components/pages/accounts/Register.js\";\nimport React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { setMessage } from \"../../../actions/message.action\";\nimport { checkValidateRegisterForm } from \"../../../mixins/checkValidateForm\";\nimport { closeMessage } from \"../../closeMessage\";\nimport { fetchData } from '../../../mixins/fetchData';\nimport { addData } from \"../../../mixins/fetchData\";\nimport Breadcrumb from '../../Breadcrumb';\nexport default function Register() {\n  const _useTranslation = useTranslation(),\n        t = _useTranslation.t;\n\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        users = _useState2[0],\n        setUsers = _useState2[1];\n\n  const _useState3 = useState(Boolean),\n        _useState4 = _slicedToArray(_useState3, 2),\n        firstNameErr = _useState4[0],\n        setFirstNameErr = _useState4[1];\n\n  const _useState5 = useState(Boolean),\n        _useState6 = _slicedToArray(_useState5, 2),\n        lastNameErr = _useState6[0],\n        setLastNameErr = _useState6[1];\n\n  const _useState7 = useState(Boolean),\n        _useState8 = _slicedToArray(_useState7, 2),\n        emailErr = _useState8[0],\n        setEmailErr = _useState8[1];\n\n  const _useState9 = useState(Boolean),\n        _useState10 = _slicedToArray(_useState9, 2),\n        addressErr = _useState10[0],\n        setAddressErr = _useState10[1];\n\n  const _useState11 = useState(Boolean),\n        _useState12 = _slicedToArray(_useState11, 2),\n        passwordErr = _useState12[0],\n        setPasswordErr = _useState12[1];\n\n  const _useState13 = useState(Boolean),\n        _useState14 = _slicedToArray(_useState13, 2),\n        passwordAgainErr = _useState14[0],\n        setPasswordAgainErr = _useState14[1];\n\n  const dispatch = useDispatch();\n  const bd = \"1px solid red\";\n  const checkUserLogin = JSON.parse(sessionStorage.getItem(\"users\"));\n\n  const handleChange = e => {\n    const target = e.target;\n    const name = target.name,\n          value = target.value;\n    setUsers(_objectSpread({}, users, {\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    try {\n      // validate\n      const userExist = checkUserExist(users.email);\n      const msg = setMessage(checkValidateRegisterForm(users, setFirstNameErr, setLastNameErr, setEmailErr, setAddressErr, setPasswordErr, setPasswordAgainErr, userExist));\n      dispatch(msg);\n      let isMessage = Boolean;\n\n      if (msg.payload === \"Mật khẩu không trùng khớp\") {\n        isMessage = false;\n      } else if (msg.payload === \"Người dùng đã tồn tại\") {\n        isMessage = false;\n      } else if (msg.payload === \"Đăng ký thành công\") {\n        isMessage = true;\n        const usersData = {\n          id: '_' + Math.random().toString(36).substr(2, 9),\n          firstName: users.firstName,\n          lastName: users.lastName,\n          email: users.email,\n          address: users.address,\n          password: users.password,\n          role: 0\n        }; // add user\n\n        addData(\"users\", usersData);\n      } else {\n        return;\n      }\n\n      dispatch(closeMessage(isMessage));\n    } catch (e) {\n      console.log(e);\n    }\n\n    function checkUserExist(email) {\n      return fetchData(\"users\", {\n        email: email\n      });\n    }\n\n    ;\n  };\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, !checkUserLogin ? React.createElement(\"section\", {\n    className: \"main-signin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"signin container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Breadcrumb, {\n    breadcrumbItem: \"Register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"signin__sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"main-title-tl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"main-title-tl__tt detail__eff--left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, t(\"Register\").toUpperCase()), React.createElement(\"div\", {\n    className: \"main-title-tl__eff detail__eff--left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"./images/titleleft-dark.png\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"signin__node-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, t(\"Login\").toUpperCase()))), React.createElement(\"div\", {\n    className: \"signin__box-su\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"signin__box-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"signin__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, t(\"Personal information\").toUpperCase()), React.createElement(\"div\", {\n    className: \"signin__ip-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      border: firstNameErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"firstName\",\n    value: users.firstName || \"\",\n    onChange: handleChange,\n    placeholder: t(\"First name\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      border: lastNameErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"lastName\",\n    value: users.lastName || \"\",\n    onChange: handleChange,\n    placeholder: t(\"Last name\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      border: emailErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    value: users.email || \"\",\n    onChange: handleChange,\n    placeholder: \"Email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      border: addressErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"address\",\n    value: users.address || \"\",\n    onChange: handleChange,\n    placeholder: t(\"Address\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      border: passwordErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    value: users.password || \"\",\n    onChange: handleChange,\n    placeholder: t(\"Password\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      border: passwordAgainErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"passwordAgain\",\n    value: users.passwordAgain || \"\",\n    onChange: handleChange,\n    placeholder: t(\"Password again\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"signin__sm-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, t(\"Register\").toUpperCase()))))))) : React.createElement(Redirect, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/src/components/pages/accounts/Register.js"],"names":["React","useState","Link","Redirect","useDispatch","useTranslation","setMessage","checkValidateRegisterForm","closeMessage","fetchData","addData","Breadcrumb","Register","t","users","setUsers","Boolean","firstNameErr","setFirstNameErr","lastNameErr","setLastNameErr","emailErr","setEmailErr","addressErr","setAddressErr","passwordErr","setPasswordErr","passwordAgainErr","setPasswordAgainErr","dispatch","bd","checkUserLogin","JSON","parse","sessionStorage","getItem","handleChange","e","target","name","value","handleSubmit","preventDefault","userExist","checkUserExist","email","msg","isMessage","payload","usersData","id","Math","random","toString","substr","firstName","lastName","address","password","role","console","log","toUpperCase","border","passwordAgain"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { setMessage } from \"../../../actions/message.action\";\nimport { checkValidateRegisterForm } from \"../../../mixins/checkValidateForm\";\nimport { closeMessage } from \"../../closeMessage\";\nimport { fetchData } from '../../../mixins/fetchData';\nimport { addData } from \"../../../mixins/fetchData\";\nimport Breadcrumb from '../../Breadcrumb';\n\nexport default function Register() {\n  const { t } = useTranslation();\n  const [users, setUsers] = useState({});\n  const [firstNameErr, setFirstNameErr] = useState(Boolean);\n  const [lastNameErr, setLastNameErr] = useState(Boolean);\n  const [emailErr, setEmailErr] = useState(Boolean);\n  const [addressErr, setAddressErr] = useState(Boolean);\n  const [passwordErr, setPasswordErr] = useState(Boolean);\n  const [passwordAgainErr, setPasswordAgainErr] = useState(Boolean);\n  const dispatch = useDispatch();\n  const bd = \"1px solid red\"\n  const checkUserLogin = JSON.parse(sessionStorage.getItem(\"users\"));\n\n  const handleChange = e => {\n    const target = e.target;\n    const { name, value } = target;\n\n    setUsers({ ...users, [name]: value });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    try {\n      // validate\n      const userExist = checkUserExist(users.email);\n      const msg = setMessage(\n        checkValidateRegisterForm(\n          users,\n          setFirstNameErr,\n          setLastNameErr,\n          setEmailErr,\n          setAddressErr,\n          setPasswordErr,\n          setPasswordAgainErr,\n          userExist\n        )\n      );\n\n      dispatch(msg);\n\n      let isMessage = Boolean;\n\n      if (msg.payload === \"Mật khẩu không trùng khớp\") {\n        isMessage = false;\n      } else if (msg.payload === \"Người dùng đã tồn tại\") {\n        isMessage = false;\n      }else if (msg.payload === \"Đăng ký thành công\") {\n        isMessage = true;\n\n        const usersData = {\n          id: '_' + Math.random().toString(36).substr(2, 9),\n          firstName: users.firstName,\n          lastName: users.lastName,\n          email: users.email,\n          address: users.address,\n          password: users.password,\n          role: 0\n        };\n\n        // add user\n        addData(\"users\", usersData);\n      } else {\n        return;\n      }\n\n      dispatch(closeMessage(isMessage));\n    } catch (e) {\n      console.log(e);\n    }\n\n    function checkUserExist(email) {\n      return fetchData(\"users\", { email: email });\n    };\n  };\n\n  return (\n    <React.Fragment>\n      {!checkUserLogin ? (<section className=\"main-signin\">\n      <div className=\"signin container\">\n        <Breadcrumb breadcrumbItem=\"Register\" />\n        <div className=\"signin__sn\">\n          <div className=\"main-title-tl\">\n            <h1 className=\"main-title-tl__tt detail__eff--left\">\n              {t(\"Register\").toUpperCase()}\n            </h1>\n            <div className=\"main-title-tl__eff detail__eff--left\">\n              <img src=\"./images/titleleft-dark.png\" alt=\"\" />\n            </div>\n          </div>\n          <div className=\"signin__node-sn\">\n            <Link to=\"/login\">{t(\"Login\").toUpperCase()}</Link>\n          </div>\n        </div>\n        <div className=\"signin__box-su\">\n          <div className=\"signin__box-sn\">\n            <div className=\"signin__title\">\n              {t(\"Personal information\").toUpperCase()}\n            </div>\n            <div className=\"signin__ip-sn\">\n              <form onSubmit={handleSubmit}>\n                <div style={{ border: firstNameErr ? bd : \"\" }}>\n                  <input\n                    type=\"text\"\n                    name=\"firstName\"\n                    value={users.firstName || \"\"}\n                    onChange={handleChange}\n                    placeholder={t(\"First name\")}\n                  />\n                </div>\n                <div style={{ border: lastNameErr ? bd : \"\" }}>\n                  <input\n                    type=\"text\"\n                    name=\"lastName\"\n                    value={users.lastName || \"\"}\n                    onChange={handleChange}\n                    placeholder={t(\"Last name\")}\n                  />\n                </div>\n                <div style={{ border: emailErr ? bd : \"\" }}>\n                  <input\n                    type=\"text\"\n                    name=\"email\"\n                    value={users.email || \"\"}\n                    onChange={handleChange}\n                    placeholder=\"Email\"\n                  />\n                </div>\n                <div style={{ border: addressErr ? bd : \"\" }}>\n                  <input\n                    type=\"text\"\n                    name=\"address\"\n                    value={users.address || \"\"}\n                    onChange={handleChange}\n                    placeholder={t(\"Address\")}\n                  />\n                </div>\n                <div style={{ border: passwordErr ? bd : \"\" }}>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    value={users.password || \"\"}\n                    onChange={handleChange}\n                    placeholder={t(\"Password\")}\n                  />\n                </div>\n                <div style={{ border: passwordAgainErr ? bd : \"\" }}>\n                  <input\n                    type=\"password\"\n                    name=\"passwordAgain\"\n                    value={users.passwordAgain || \"\"}\n                    onChange={handleChange}\n                    placeholder={t(\"Password again\")}\n                  />\n                </div>\n                <button className=\"signin__sm-sn\">\n                  {t(\"Register\").toUpperCase()}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>) : <Redirect to=\"/\" />}\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}