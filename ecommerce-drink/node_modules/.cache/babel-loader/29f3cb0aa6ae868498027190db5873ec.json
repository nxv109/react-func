{"ast":null,"code":"import _objectSpread from \"/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/src/components/pages/accounts/Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { setMessage } from \"../../../actions/message.action\";\nimport { setUserLogin } from \"../../../actions/user.action\";\nimport { fetchData } from '../../../mixins/fetchData';\nimport { closeMessage } from \"../../closeMessage\";\nimport { checkValidateLoginForm } from \"../../../mixins/checkValidateForm\";\nimport Breadcrumb from '../../Breadcrumb';\nexport default function Login({\n  history\n}) {\n  const _useTranslation = useTranslation(),\n        t = _useTranslation.t;\n\n  const _useState = useState(Object),\n        _useState2 = _slicedToArray(_useState, 2),\n        users = _useState2[0],\n        setUsers = _useState2[1];\n\n  const _useState3 = useState(Object),\n        _useState4 = _slicedToArray(_useState3, 2),\n        userData = _useState4[0],\n        setUserData = _useState4[1];\n\n  const _useState5 = useState(Boolean),\n        _useState6 = _slicedToArray(_useState5, 2),\n        emailErr = _useState6[0],\n        setEmailErr = _useState6[1];\n\n  const _useState7 = useState(Boolean),\n        _useState8 = _slicedToArray(_useState7, 2),\n        passwordErr = _useState8[0],\n        setPasswordErr = _useState8[1];\n\n  const dispatch = useDispatch();\n  const bd = \"1px solid red\";\n  const checkUserLogin = JSON.parse(sessionStorage.getItem(\"users\"));\n  useEffect(() => {\n    setUserData(fetchData('users'));\n    return () => false;\n  }, []);\n\n  const handleChange = e => {\n    const target = e.target;\n    const name = target.name,\n          value = target.value;\n    setUsers(_objectSpread({}, users, {\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    try {\n      // validate\n      setMessage(checkValidateLoginForm(users, setEmailErr, setPasswordErr));\n      const userExist = userData.find(v => v.email === users.email);\n\n      if (users.email && users.password) {\n        if (!userExist) {\n          dispatch(setMessage(\"Người dùng không tồn tại\"));\n        } else if (users.email === userExist.email && users.password === userExist.password) {\n          dispatch(setMessage(\"Đăng nhập thành công\"));\n          const id = userExist.id,\n                email = userExist.email;\n          sessionStorage.setItem(\"users\", JSON.stringify({\n            id,\n            email\n          }));\n          dispatch(setUserLogin(userExist));\n          history.push(\"/\");\n        } else {\n          dispatch(setMessage(\"Sai email/password\"));\n        }\n      } else {\n        return;\n      }\n\n      dispatch(closeMessage(\"\"));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, !checkUserLogin ? React.createElement(\"section\", {\n    className: \"main-signin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"signin container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Breadcrumb, {\n    breadcrumbItem: \"Login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"signin__sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"main-title-tl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"main-title-tl__tt detail__eff--left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, t(\"Login\").toUpperCase()), React.createElement(\"div\", {\n    className: \"main-title-tl__eff detail__eff--left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"./images/titleleft-dark.png\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"signin__node-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, t(\"Register\").toUpperCase()))), React.createElement(\"div\", {\n    className: \"signin__box-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"signin__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, t(\"Customer login\").toUpperCase()), React.createElement(\"div\", {\n    className: \"signin__ip-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      border: emailErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    placeholder: \"Email\",\n    value: users.email || \"\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      border: passwordErr ? bd : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: t(\"Password\"),\n    value: users.password || \"\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"signin__sm-sn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, t(\"Login\").toUpperCase())))))) : React.createElement(Redirect, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/nguyen.xuan.vinh/Desktop/github/code-dao-reactjs/ecommerce-drink/src/components/pages/accounts/Login.js"],"names":["React","useState","useEffect","Link","Redirect","useDispatch","useTranslation","setMessage","setUserLogin","fetchData","closeMessage","checkValidateLoginForm","Breadcrumb","Login","history","t","Object","users","setUsers","userData","setUserData","Boolean","emailErr","setEmailErr","passwordErr","setPasswordErr","dispatch","bd","checkUserLogin","JSON","parse","sessionStorage","getItem","handleChange","e","target","name","value","handleSubmit","preventDefault","userExist","find","v","email","password","id","setItem","stringify","push","console","log","toUpperCase","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { setMessage } from \"../../../actions/message.action\";\nimport { setUserLogin } from \"../../../actions/user.action\";\nimport { fetchData } from '../../../mixins/fetchData';\nimport { closeMessage } from \"../../closeMessage\";\nimport { checkValidateLoginForm } from \"../../../mixins/checkValidateForm\";\nimport Breadcrumb from '../../Breadcrumb';\n\nexport default function Login({ history }) {\n  const { t } = useTranslation();\n  const [users, setUsers] = useState(Object);\n  const [userData, setUserData] = useState(Object);\n  const [emailErr, setEmailErr] = useState(Boolean);\n  const [passwordErr, setPasswordErr] = useState(Boolean);\n  const dispatch = useDispatch();\n  const bd = \"1px solid red\";\n  const checkUserLogin = JSON.parse(sessionStorage.getItem(\"users\"));\n\n  useEffect(() => {\n    setUserData(fetchData('users'));\n\n    return () => false;\n  }, []);\n\n  const handleChange = e => {\n    const target = e.target;\n    const { name, value } = target;\n\n    setUsers({ ...users, [name]: value });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    try {\n      // validate\n      setMessage(checkValidateLoginForm(users, setEmailErr, setPasswordErr));\n\n      const userExist = userData.find(v => v.email === users.email);\n\n      if (users.email && users.password) {\n        if (!userExist) {\n          dispatch(setMessage(\"Người dùng không tồn tại\"));\n        } else if (\n          users.email === userExist.email &&\n          users.password === userExist.password\n        ) {\n          dispatch(setMessage(\"Đăng nhập thành công\"));\n\n          const { id, email } = userExist;\n          sessionStorage.setItem(\"users\", JSON.stringify({ id, email }));\n          dispatch(setUserLogin(userExist));\n          history.push(\"/\");\n        } else {\n          dispatch(setMessage(\"Sai email/password\"));\n        }\n      } else {\n        return;\n      }\n\n      dispatch(closeMessage(\"\"));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <React.Fragment>\n        {!checkUserLogin ? (<section className=\"main-signin\">\n        <div className=\"signin container\">\n          <Breadcrumb breadcrumbItem=\"Login\" />\n          <div className=\"signin__sn\">\n            <div className=\"main-title-tl\">\n              <h1 className=\"main-title-tl__tt detail__eff--left\">{t(\"Login\").toUpperCase()}</h1>\n              <div className=\"main-title-tl__eff detail__eff--left\">\n                <img src=\"./images/titleleft-dark.png\" alt=\"\" />\n              </div>\n            </div>\n            <div className=\"signin__node-sn\">\n              <Link to=\"/register\">{t(\"Register\").toUpperCase()}</Link>\n            </div>\n          </div>\n          <div className=\"signin__box-sn\">\n            <div className=\"signin__title\">{t(\"Customer login\").toUpperCase()}</div>\n            <div className=\"signin__ip-sn\">\n              <form onSubmit={handleSubmit}>\n                <div style={{ border: emailErr ? bd : \"\" }}>\n                  <input\n                    type=\"text\"\n                    name=\"email\"\n                    placeholder=\"Email\"\n                    value={users.email || \"\"}\n                    onChange={handleChange}\n                  />\n                </div>\n                <div style={{ border: passwordErr ? bd : \"\" }}>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder={t(\"Password\")}\n                    value={users.password || \"\"}\n                    onChange={handleChange}\n                  />\n                </div>\n                <button className=\"signin__sm-sn\">{t(\"Login\").toUpperCase()}</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </section>) : <Redirect to=\"/\" />}\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}